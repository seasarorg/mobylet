<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>mobylet（モビレット） | 設定ファイル（mobyletSession.xml） | 携帯Webアプリケーションを開発するためのJavaオープンソースフレームワーク</title>
<meta http-equiv="Content-Language" content="ja" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta name="description" content="「mobylet」はJavaで作られたオープンソースのモバイルWebアプリケーションフレームワークで、様々なWebフレームワークと共に利用することが可能です。" />
<meta name="keywords" content="携帯,モバイル,Web,Java,OSS,絵文字,mobylet" />
<link rel="shortcut icon" type="image/x-icon" href="../img/favicon.ico" />
<script src="../js/rollover.js" type="text/javascript"></script>
<link href="../css/mobylet.css" rel="stylesheet" type="text/css" />
<link href="../css/colorST.css" rel="stylesheet" type="text/css" />
</head>
<body id="pageTop">
<div id="wrapper">
	<!-- start header -->
	<div id="header" class="cFix">
		<h1 id="logo" class="fl"><a href="../index.html" title="mobylet"><img src="../img/logo.gif" alt="mobylet" title="mobylet" /></a></h1>
		<ul id="gNav" class="fr cFix">
			<li><a href="../index.html"><img src="../img/globalnavi/tp.gif" alt="TOP" title="TOP" class="imgover" /></a></li>
			<li><a href="../guides/"><img src="../img/globalnavi/bg.gif" alt="初めての方へ" title="初めての方へ" class="imgover" /></a></li>
			<li><img src="../img/globalnavi/st_o.gif" alt="mobyletの設定" title="mobyletの設定" /></li>
			<li><a href="../references/"><img src="../img/globalnavi/ft.gif" alt="機能リファレンス" title="機能リファレンス" class="imgover" /></a></li>
			<li><a href="../downloads/"><img src="../img/globalnavi/dl.gif" alt="ダウンロード" title="ダウンロード" class="imgover" /></a></li>
			<li><a href="../informations/"><img src="../img/globalnavi/if.gif" alt="インフォメーション" title="インフォメーション" class="imgover" /></a></li>
			<li><a href="../questions/"><img src="../img/globalnavi/qa.gif" alt="Q&amp;A" title="Q&amp;A" class="imgover" /></a></li>
		</ul>
	</div>
	<!-- end header -->

	<!-- start container -->
	<div class="container cFix">

		<!-- start mainWrap -->
		<div id="mainWrap">
			<h2>mobyletSession.xmlについて（ver 1.0.4以降）</h2>

			<!-- start main -->
			<div id="main">
				<!-- start descWrap -->
				<div id ="descWrap" class="marT20">
					<div id="descInner">
						<p class="padT10 lh18p">
						mobyletを利用してセッションを使う場合、mobyletSessionを利用することが出来ます。<br />
						mobyletSessionはUID/GUIDベースで管理可能なmobylet独自のセッション機構です。<br />
						また、デフォルトで冗長構成に対応しています。
						</p>
						<p class="padT10 padB20 lh18p fgRed">
						&lt;制限事項&gt;<br />
						Seasar2連携時、HotDeploy環境下ではClassCastExceptionが発生する可能性があります。<br />
						（セッションオブジェクトがコンテナ管理外のクラスであれば問題無し）<br />
						この現象は将来のバージョンで対応予定です。
						</p>
					</div>
				</div>
				<!-- end descWrap -->

				<!-- start cstWrap -->
				<div class="cstWrap marT22">
					<h3>mobyletSession.xmlを配置する</h3>
					<div class="cstInner">
						<h4>mobyletSession.xmlを配置する</h4>
						<p class="marT20 lh18p">
						「mobyletSession.xml」は、Webアプリケーション単位に用意されなかった場合<br />
						mobylet-core-xxx.jarに含まれているmobyletSession.xmlを読み込むことで初期化を行いますが<br />
						Webアプリケーション単位にファイルが用意されている場合は、そちらを優先して読み込みます。<br />
						<br />
						「mobyletSession.xml」を配置するディレクトリは「mobylet.xml」と同じディレクトリになります。<br />
						※「mobylet.xml」を配置するディレクトリについては<a href="./mobyletxml.html">こちら</a>
						</p>
						<div class="goTop tRight marT30"><a href="#pageTop">ページのTOPへ戻る</a></div>
					</div>
					<!-- end cstInner -->
				</div>
				<!-- end cstWrap -->

				<!-- start cstWrap -->
				<div class="cstWrap marT22">
					<h3>mobyletSession.xmlの初期設定</h3>
					<div class="cstInner">
						<h4>初期設定</h4>
						<p class="marT20 lh18p">
						mobyletSession.xmlはデフォルトで以下のように定義されています。
						</p>
						<!-- start codeWrap -->
						<div class="codeWrap marT10">
							<div class="codeInner">
								<pre class="code">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;mobyletSession&gt;
    &lt;key&gt;GUID&lt;/key&gt;
    &lt;timeout&gt;30&lt;/timeout&gt;
    &lt;adapter&gt;org.mobylet.core.session.impl.MobyletMultiSessionAdapter&lt;/adapter&gt;
    &lt;distribution&gt;
        &lt;protocol&gt;http&lt;/protocol&gt;
        &lt;path&gt;${contextPath}/mobyletSession&lt;/path&gt;
        &lt;parameters&gt;
            &lt;sessionKey&gt;s&lt;/sessionKey&gt;
            &lt;objectData&gt;o&lt;/objectData&gt;
            &lt;invokeType&gt;i&lt;/invokeType&gt;
        &lt;/parameters&gt;
        &lt;receiveHosts&gt;
            &lt;host name="host1"&gt;127.0.0.1:8080&lt;/host&gt;
        &lt;/receiveHosts&gt;
        &lt;allowIps&gt;
            &lt;ip&gt;127.0.0.1&lt;/ip&gt;
        &lt;/allowIps&gt;
    &lt;/distribution&gt;
&lt;/mobyletSession&gt;
</pre>
							</div>
						</div>
						<!-- end codeWrap -->
						<h4>要素 key</h4>
						<p class="marT20 lh18p">
						セッションを管理するためのキーとなるID情報。<br />
						「UID」若しくは「GUID」を指定出来ます。
						</p>
						<h4>要素 timeout</h4>
						<p class="marT20 lh18p">
						セッションを保持する時間（単位：分）<br />
						該当するIDで最後にタッチしてからこの時間を経過した場合、そのIDのセッション情報は破棄される。<br />
						※メモリ上からセッション情報が消失するタイミングとは異なる
						</p>
						<h4>要素 adapter</h4>
						<p class="marT20 lh18p">
						セッション情報へ接続するためのアダプタクラス<br />
						mobylet-coreには以下の2つのクラスが用意されている。
						</p>
						<ul class="marT10">
							<li>org.mobylet.core.session.impl.MobyletSingleSessionAdapter（WEBAPPサーバ冗長構成非対応）</li>
							<li>org.mobylet.core.session.impl.MobyletMultiSessionAdapter（WEBAPPサーバ冗長構成対応）</li>
						</ul>
						<p class="marT10 lh18p">
						※Google App Engineをご利用になる場合は「MobyletSingleSessionAdapter」を指定してください
						</p>
						<h4>要素 distribution</h4>
						<p class="marT20 lh18p">
						サーバ冗長構成時に各サーバにセッション情報を振り分けるための設定を行う。
						</p>
						<h4>要素 distribution/protocol</h4>
						<p class="marT20 lh18p">
						各サーバ間でセッション情報を通信する際のプロトコル<br />
						「http」若しくは「https」が利用可能。<br />
						※セッション情報がインターネット網を流れる場合は「https」の選択がオススメ
						</p>
						<h4>要素 distribution/path</h4>
						<p class="marT20 lh18p">
						セッション情報をやり取りするための専用URI<br />
						実際のアプリでは利用しないURIを指定し、このURLをセッション情報通信用URIとして利用させる。
						</p>
						<h4>要素 distribution/parameters</h4>
						<p class="marT20 lh18p">
						セッション情報を受け渡すパラメータキー<br />
						※特に変更する必要は無し
						</p>
						<h4>要素 distribution/receiveHosts</h4>
						<p class="marT20 lh18p">
						セッションを保持するアプリケーションを指定する<br />
						「host」タグは複数記述することが可能で、name属性はログ出力用のホスト名を記載し、<br />
						値に「ホスト名（IPアドレス）:ポート番号」を指定する。<br />
						通常は冗長構成を取る全サーバを指定する（1台構成の場合でも使用可能）。
						</p>
						<h4>要素 distribution/allowIps</h4>
						<p class="marT20 lh18p">
						セッション情報を通信可能なIPを指定する<br />
						ここで指定したIPアドレス以外はセッション情報を通信することができません。<br />
						通常は冗長構成を取る全サーバを指定する（サブネットマスクを利用したIPアドレス帯域の指定も可能）
						</p>
						<div class="goTop tRight marT30"><a href="#pageTop">ページのTOPへ戻る</a></div>
					</div>
					<!-- end cstInner -->
				</div>
				<!-- end cstWrap -->

				<!-- start cstWrap -->
				<div class="cstWrap marT22">
					<h3>非冗長構成の場合</h3>
					<div class="cstInner">
						<h4>MobyletSingleSessionAdapterの設定</h4>
						<p class="marT20 lh18p">
						非冗長構成時は通信を伴わない、一般的なセッション管理を行うことも可能です。<br />
						この場合は次のような「mobyletSession.xml」を「mobylet.xml」と同じディレクトリに配置します。
						</p>
						<!-- start codeWrap -->
						<div class="codeWrap marT10">
							<div class="codeInner">
								<pre class="code">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;mobyletSession&gt;
    &lt;key&gt;GUID&lt;/key&gt;
    &lt;timeout&gt;30&lt;/timeout&gt;
    &lt;adapter&gt;org.mobylet.core.session.impl.MobyletSingleSessionAdapter&lt;/adapter&gt;
&lt;/mobyletSession&gt;
</pre>
							</div>
						</div>
						<!-- end codeWrap -->
						<div class="goTop tRight marT30"><a href="#pageTop">ページのTOPへ戻る</a></div>
					</div>
					<!-- end cstInner -->
				</div>
				<!-- end cstWrap -->

			</div>
			<!-- end main -->
		</div>
		<!-- end mainWrap -->

		<!-- start sideArea -->
		<div id="sideArea">
			<dl class="sideCst">
				<dt>Settings</dt>
				<dd>
					<ul>
						<li><a href="./">mobyletの設定</a></li>
						<li><a href="./seasar2.html">Seasar2を利用する</a></li>
						<!--
						<li><a href="./spring.html">Springを利用する</a></li>
						<li><a href="./t2.html">T2を利用する</a></li>
						-->
						<li><a href="./mobyletxml.html">mobylet.xmlについて</a></li>
						<li><a href="./mobyletSessionXml.html">mobyletSession.xmlについて</a></li>
						<li class="last"><a href="./resize.html">画像リサイズ設定</a></li>
					</ul>
				</dd>
			</dl>
			<!--
			<dl class="sideCst marT20">
				<dt>Tutorials</dt>
				<dd>
					<ul>
						<li>Simple Version（JSP only）</li>
						<li>SAStruts Version</li>
						<li class="last">GAE/J Version</li>
					</ul>
				</dd>
			</dl>
			-->
			<ul class="banner cFix marT20">
				<li><a href="http://d.hatena.ne.jp/mobylet/" target="_blank"><img src="../img/bnr_blog.gif" alt="ブログ" title="ブログ" class="imgover" /></a></li>
				<li><a href="https://www.seasar.org/issues/browse/MOBYLET" target="_blank"><img src="../img/bnr_jira.gif" alt="JIRA" title="JIRA" class="imgover" /></a></li>
			</ul>
		</div>
		<!-- end sideArea -->
	</div>
	<!-- end container -->
	<!-- start footer -->
	<div class="container marT30">
		<div class="tRight"><a href="#pageTop"><img src="../img/bg_gotop_foot.gif" alt="ページのTOPへ戻る" title="ページのTOPへ戻る" class="imgover" /></a></div>
	</div>
	<div id="footer">
		<div class="container">
			<ul class="footLink cFix">
				<li><a href="../index.html">TOP</a></li>
				<li><a href="../guides/">初めての方へ</a></li>
				<li><a href="../settings/">mobyletの設定</a></li>
				<li><a href="../references/">リファレンス</a></li>
				<li><a href="../downloads/">ダウンロード</a></li>
				<li><a href="../informations/">インフォメーション</a></li>
				<li class="last"><a href="../questions/">Q&amp;A</a></li>
			</ul>
			<div class="marT40">
				constructed by <a href="http://www.leihauoli.com/" target="_blank" title="株式会社レイハウオリ">株式会社Lei Hau'oli</a><br/>
				supported by <a href="http://valueengine.jp/" target="_blank" title="株式会社バリューエンジン">株式会社バリューエンジン</a><br/>
				&copy; Copyright Lei Hau'oli Co.,Ltd. and <a href="http://www.seasar.org/" target="_blank" title="The Seasar Project">The Seasar Foundation</a> and the others 2006, all rights reserved.
			</div>
		</div>
		<!-- end container -->
	</div>
	<!-- end footer -->
</div>
<!-- ↑end wrapper -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-9308763-2");
pageTracker._trackPageview();
} catch(err) {}</script>
</body>
</html>
