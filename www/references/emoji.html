<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>mobylet（モビレット） | 機能リファレンス | 携帯Webアプリケーションを開発するためのJavaオープンソースフレームワーク</title>
<meta http-equiv="Content-Language" content="ja" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta name="description" content="「mobylet」はJavaで作られたオープンソースのモバイルWebアプリケーションフレームワークで、様々なWebフレームワークと共に利用することが可能です。" />
<meta name="keywords" content="携帯,モバイル,Web,Java,OSS,絵文字,mobylet" />
<link rel="shortcut icon" type="image/x-icon" href="../img/favicon.ico" />
<script src="../js/rollover.js" type="text/javascript"></script>
<link href="../css/mobylet.css" rel="stylesheet" type="text/css" />
<link href="../css/colorFT.css" rel="stylesheet" type="text/css" />
</head>
<body id="pageTop">
<div id="wrapper">
	<!-- start header -->
	<div id="header" class="cFix">
		<h1 id="logo" class="fl"><a href="../index.html" title="mobylet"><img src="../img/logo.gif" alt="mobylet" title="mobylet" /></a></h1>
		<ul id="gNav" class="fr cFix">
			<li><a href="../index.html"><img src="../img/globalnavi/tp.gif" alt="TOP" title="TOP" class="imgover" /></a></li>
			<li><a href="../guides/"><img src="../img/globalnavi/bg.gif" alt="初めての方へ" title="初めての方へ" class="imgover" /></a></li>
			<li><a href="../settings/"><img src="../img/globalnavi/st.gif" alt="mobyletの設定" title="mobyletの設定" class="imgover" /></a></li>
			<li><img src="../img/globalnavi/ft_o.gif" alt="機能リファレンス" title="機能リファレンス" /></li>
			<li><a href="../downloads/"><img src="../img/globalnavi/dl.gif" alt="ダウンロード" title="ダウンロード" class="imgover" /></a></li>
			<li><a href="../informations/"><img src="../img/globalnavi/if.gif" alt="インフォメーション" title="インフォメーション" class="imgover" /></a></li>
			<li><a href="../questions/"><img src="../img/globalnavi/qa.gif" alt="Q&A" title="Q&A" class="imgover" /></a></li>
		</ul>
	</div>
	<!-- end header -->


	<!-- start container -->
	<div class="container cFix">

		<!-- start mainWrap -->
		<div id="mainWrap">
			<h2>絵文字を扱う</h2>

			<!-- start main -->
			<div id="main">

				<!-- start cstWrap -->
				<div class="cstWrap marT22">
					<h3 id="show">絵文字をタグで表示する </h3>
					<div class="cstInner">

						<h4>カスタムタグを利用して絵文字を表示する</h4>

						<p class="marT20 lh18p">
						絵文字の表示は、Mobyletのカスタムタグを利用することで、キャリアを意識することなく表示することが可能です。<br />
						カスタムタグを利用するには、まず<a href="../settings/index.html#taglib">taglibの利用設定</a>を参照して、JSPにpageディレクティブを記述してください。<br />
						<br />
						Mobyletでは、日本語で絵文字を指定できるため、ソースを見たときにどの絵文字を使用しているかがすぐに分かります。<br />
						<a href="../settings/index.html#taglib">taglibの利用設定</a>の通りにpageディレクティブを記述した場合、絵文字のカスタムタグは以下のように記述します。
						</p>
						<!-- start codeWrap -->
						<div class="codeWrap marT20">
							<div class="codeInner">
								<pre class="code">&lt;m:emoji&nbsp;name="晴れ"&gt;</pre>
							</div>
						</div>
						<!-- end codeWrap -->

						<p class="marT20 lh18p">
						上記の記述では、Docomoの「晴れ」の絵文字を基本として、<br />
						Au端末やSoftbank端末からのアクセスの場合には各キャリアに対応した絵文字に変換されます。<br />
						<br />
						「name」に指定する値は、mobylet-core.jarに同梱されている<br />
						「mobylet.emojistocker.docomo.xml」<br />
						「mobylet.emojistocker.au.xml」<br />
						「mobylet.emojistocker.softbank.xml」<br />
						を参照してください。<br />
						<br />
						以下のようなXMLが記述されていますので、「emoji」要素の「name」の値を使用可能です。
						</p>
						<!-- start codeWrap -->
						<div class="codeWrap marT20">
							<div class="codeInner">
								<pre class="code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;emojipool carrier="DOCOMO"&gt;
    &lt;emoji name="晴れ" code="0xE63E"&gt;
        &lt;relation carrier="AU"&gt;0xE92C&lt;/relation&gt;
        &lt;relation carrier="SOFTBANK"&gt;0xE04A&lt;/relation&gt;
        &lt;relation carrier="OTHER"&gt;〓&lt;/relation&gt;
    &lt;/emoji>
    ・・・その他の設定・・・
&lt;/emojipool&gt;</pre>
							</div>
						</div>
						<!-- end codeWrap -->

						<p class="marT20 lh18p">
						AuやSoftbankの絵文字を基点として記述することも可能です。<br />
						以下の例では、Auの「太陽」の絵文字を基点として記述しています。<br />
						Auで指定できる「name」の値は「mobylet.emojistocker.au.xml」を参照してください。
						</p>
						<div class="codeWrap marT20">
							<div class="codeInner">
								<pre class="code">&lt;m:emoji&nbsp;name="太陽"&nbsp;carrier="AU"&gt;</pre>
							</div>
						</div>
						<p class="marT20 lh18p">
						一般的には、最も絵文字の種類の少ないDocomoを基点に記述します。<br />
						AuやSoftbankの絵文字を基点にした場合は、Docomoで絵文字が表示されるかをチェックすることをお勧めします。
						</p>

						<div class="goTop tRight marT30"><a href="#pageTop">ページのTOPへ戻る</a></div>
					</div>
					<!-- end cstInner -->
				</div>
				<!-- end cstWrap -->

				<!-- start cstWrap -->
				<div class="cstWrap marT22">
					<h3 id="replace">絵文字を削除する</h3>
					<!-- start cstInner -->
					<div class="cstInner">
						<h4>文字列に含まれる絵文字を削除する</h4>
						<p class="marT20 lh18p">
						テキストボックスに入力された値に絵文字が含まれている場合などに、<br />
						EmojiUtilsクラスを利用して以下のように入力値から絵文字を削除することが可能です。
						</p>
						<div class="codeWrap marT20">
							<div class="codeInner">
								<pre class="code">String removedEmoji = EmojiUtils.removeEmoji("絵文字が含まれた文字列");</pre>
							</div>
						</div>
						<h4>文字列に含まれる絵文字を変換する</h4>
						<p class="marT20 lh18p">
						文字列に含まれる絵文字を削除するのではなく、<br />
						特定の文字に変換したい場合にも以下のようにEmojiUtilsクラスを使用します。
						</p>
						<div class="codeWrap marT20">
							<div class="codeInner">
								<pre class="code">String replacedEmoji = EmojiUtils.replaceEmoji("絵文字が含まれた文字列","絵文字を置き換える文字");</pre>
							</div>
						</div>
						<div class="goTop tRight marT30"><a href="#pageTop">ページのTOPへ戻る</a></div>
					</div>
					<!-- end cstInner -->
				</div>
				<!-- end cstWrap -->

				<!-- start cstWrap -->
				<div class="cstWrap marT22">
					<h3 id="convert">変換仕様を変える</h3>
					<!-- start cstInner -->
					<div class="cstInner">
						<h4>マッピングルールXMLを配置する</h4>
						<p class="marT20 lh18p">
						キャリア間の絵文字のマッピングルールを指定しているXMLは<br />
						mobylet-core.jarに同梱されていますが、独自のマッピングルールXMLを使用することも可能です。<br />
						<br />
						まず、マッピングルールXML配置用のディレクトリをクラスパス上に作成してください。<br />
						<br />
						例） Maven2を利用したプロジェクトの場合
						</p>
						<!-- start codeWrap -->
						<div class="codeWrap marT10">
							<div class="codeInner">
								<pre class="code">{projectディレクトリ}/src/main/resources/emoji/</pre>
							</div>
						</div>
						<!-- end codeWrap -->
						<p class="marT20 lh18p">例） 通常のWebアプリケーションプロジェクトの場合 </p>
						<!-- start codeWrap -->
						<div class="codeWrap marT10">
							<div class="codeInner">
								<pre class="code">{webappルート}/WEB-INF/classes/emoji/</pre>
							</div>
						</div>
						<!-- end codeWrap -->
						<p class="marT20 lh18p">
						次に、作成したディレクトリに<br />
						「mobylet.emojistocker.docomo.xml」「mobylet.emojistocker.au.xml」「mobylet.emojistocker.softbank.xml」<br />
						という名前のXMLを作成し、それぞれmobylet-core.jarに同梱されている同名のXMLの内容をコピーしてください。
						</p>
						<h4>マッピングルールを変更する</h4>
						<p class="marT20 lh18p">
						クラスパス上に配したマッピングルールXMLの内容を変更することで、Mobyletの絵文字変換仕様を変更することができます。<br />
						例として、Docomoの「晴れ」の絵文字のマッピングルールを変更してみましょう。<br />
						「mobylet.emojistocker.docomo.xml」では以下のように定義されています。
						</p>
						<!-- start codeWrap -->
						<div class="codeWrap marT10">
							<div class="codeInner">
								<pre class="code">
&lt;emoji name="晴れ" code="0xE63E"&gt;
    &lt;relation carrier="AU"&gt;0xE92C&lt;/relation&gt;
    &lt;relation carrier="SOFTBANK"&gt;0xE04A&lt;/relation&gt;
    &lt;relation carrier="OTHER"&gt;〓&lt;/relation&gt;
&lt;/emoji></pre>
							</div>
						</div>
						<!-- end codeWrap -->
						<p class="marT20 lh18p">
						「mobylet.emojistocker.au.xml」を開き、「0xE92C」を検索すると、以下のように定義されていることが分かります。
						</p>
						<!-- start codeWrap -->
						<div class="codeWrap marT10">
							<div class="codeInner">
								<pre class="code">
&lt;emoji name="太陽" code="0xE92C"&gt;
    &lt;relation carrier="DOCOMO"&gt;0xE63E&lt;/relation&gt;
    &lt;relation carrier="SOFTBANK"&gt;0xE04A&lt;/relation&gt;
    &lt;relation carrier="OTHER"&gt;〓&lt;/relation&gt;
&lt;/emoji></pre>
							</div>
						</div>
						<!-- end codeWrap -->
						<p class="marT20 lh18p">
						このような定義により、MobyletではDocomoの「晴れ」の絵文字をAuの「太陽」の絵文字に変換しています。<br />
						<br />
						それでは、Docomoの「晴れ」の絵文字が、Auの「ハート」の絵文字に変換されるようにしてみます。<br />
						Auの「ハート」の絵文字は、「mobylet.emojistocker.au.xml」で以下のように定義されています。
						</p>
						<!-- start codeWrap -->
						<div class="codeWrap marT10">
							<div class="codeInner">
								<pre class="code">
&lt;emoji name="ハート" code="0xE933"&gt;
    &lt;relation carrier="DOCOMO"&gt;0xE6EC&lt;/relation&gt;
    &lt;relation carrier="SOFTBANK"&gt;0xE022&lt;/relation&gt;
    &lt;relation carrier="OTHER"&gt;〓&lt;/relation&gt;
&lt;/emoji></pre>
							</div>
						</div>
						<!-- end codeWrap -->
						<p class="marT20 lh18p">
						「code」に記述されている「0xE933」をコピーして、「mobylet.emojistocker.docomo.xml」を以下のように編集します。
						</p>
						<!-- start codeWrap -->
						<div class="codeWrap marT10">
							<div class="codeInner">
								<pre class="code">
&lt;emoji name="晴れ" code="0xE63E"&gt;
    &lt;relation carrier="AU"&gt;0xE933&lt;/relation&gt;　←この部分を編集
    &lt;relation carrier="SOFTBANK"&gt;0xE04A&lt;/relation&gt;
    &lt;relation carrier="OTHER"&gt;〓&lt;/relation&gt;
&lt;/emoji></pre>
							</div>
						</div>
						<!-- end codeWrap -->
						<p class="marT20 lh18p">
						これでDocomoの「晴れ」の絵文字は、Auの「ハート」の絵文字に変換されて表示されるようになります。
						</p>
						<div class="goTop tRight marT30"><a href="#pageTop">ページのTOPへ戻る</a></div>
					</div>
					<!-- end cstInner -->
				</div>
				<!-- end cstWrap -->

				<!-- start cstWrap -->
				<div class="cstWrap marT22">
					<h3 id="image">絵文字を画像で表示する</h3>
					<!-- start cstInner -->
					<div class="cstInner">
						<h4>Otherキャリアの場合でも絵文字を表示する</h4>
						<p class="marT20 lh18p">
						絵文字は携帯端末自体にインストールされているため、<br />
						PCからのアクセスなど、Otherキャリアの場合には絵文字を表示することができません。<br />
						しかし、MobyletではOtherキャリアと判定された場合に、絵文字を画像として表示することが可能です。
						</p>
						<h4>絵文字画像の配置</h4>
						<p class="marT20 lh18p">
						<a href="../resources/mobylet-emoji.zip">絵文字画像一式</a>をダウンロードし、解凍した「mobylet-image」フォルダを任意の場所に配置します。
						</p>
						<h4>mobylet.xmlに画像パスを設定する</h4>
						<p class="marT20 lh18p">
						クラスパス配下のmobylet.xmlに対して、「imagePath」の設定を追加します。<br />
						「imagePath」には、「mobylet-image」にアクセスするためのパスを記述します。<br />
						以下の例は、プロジェクトのWebアプリケーションルートに「mobylet-image」フォルダを配置した場合の記述になります。
						</p>
						<div class="codeWrap marT20">
							<div class="codeInner">
								<pre class="code">
&lt;emoji&gt;
    &lt;basedir&gt;emoji/&lt;/basedir&gt;
    &lt;imagePath&gt;mobylet-image&lt;/imagePath&gt;
&lt;/emoji&gt;</pre>
							</div>
						</div>
						<p class="marT20 lh18p">
						「mobylet-image」フォルダはWebサーバー上の任意の場所に配置することも可能です。
						</p>
						<div class="goTop tRight marT30"><a href="#pageTop">ページのTOPへ戻る</a></div>
					</div>
					<!-- end cstInner -->
				</div>
				<!-- end cstWrap -->

			</div>
			<!-- end main -->
		</div>
		<!-- end mainWrap -->


		<!-- start sideArea -->
		<div id="sideArea">
			<dl class="sideCst">
				<dt><span class="fs12p">機能リファレンス</span></dt>
				<dd>
					<ul>
					<li><a href="./">機能リファレンストップ</a></li>
					<li><a href="./carrier.html">キャリアを判定する</a></li>
					<li><a href="./mobylet.html">端末の情報を取得する</a></li>
					<li><a href="./gps.html">GPSと地図を利用する</a></li>
					<li><a href="./emoji.html">絵文字を扱う</a></li>
					<li><a href="./image.html">画像をリサイズする</a></li>
					<li><a href="./hankaku.html">半角に変換する</a></li>
					<li><a href="./mail.html">メールを送る</a></li>
					<li><a href="./xhtml.html">XHTMLのビューを利用する</a></li>
					<li><a href="./taglibs.html">便利なタグライブラリを利用する</a></li>
					<!--
					<li><a href="./analytics.html">Google Analyticsを利用する</a></li>
					-->
					<li class="last"><a href="./mania.html">マニアックに利用する</a></li>
					</ul>
				</dd>
			</dl>
			<ul class="banner cFix marT20">
						<li><a href="http://d.hatena.ne.jp/mobylet/" target="_blank"><img src="../img/bnr_blog.gif" alt="ブログ" title="ブログ" class="imgover" /></a></li>
						<li><a href="https://www.seasar.org/issues/browse/MOBYLET" target="_blank"><img src="../img/bnr_jira.gif" alt="JIRA" title="JIRA" class="imgover" /></a></li>
			</ul>
		</div>
		<!-- end sideArea -->


	</div>
	<!-- end container -->


	<!-- start footer -->
	<div class="container marT30">
		<div class="tRight"><a href="#pageTop"><img src="../img/bg_gotop_foot.gif" alt="ページのTOPへ戻る" title="ページのTOPへ戻る" class="imgover" /></a></div>
	</div>
	<div id="footer">
		<div class="container">
			<ul class="footLink cFix">
				<li><a href="../index.html">TOP</a></li>
				<li><a href="../guides/">初めての方へ</a></li>
				<li><a href="../settings/">mobyletの設定</a></li>
				<li><a href="../references/">リファレンス</a></li>
				<li><a href="../downloads/">ダウンロード</a></li>
				<li><a href="../informations/">インフォメーション</a></li>
				<li class="last"><a href="../questions/">Q&A</a></li>
			</ul>
			<div class="marT40">
				constructed by <a href="http://www.leihauoli.com/" title="株式会社レイハウオリ">株式会社Lei Hau'oli</a><br/>
				supported by <a href="http://valueengine.jp/" title="株式会社バリューエンジン">株式会社バリューエンジン</a><br/>
				&copy; Copyright Lei Hau'oli Co.,Ltd. and The Seasar Foundation and the others 2006, all rights reserved.
			</div>
		</div>
		<!-- end container -->
	</div>
	<!-- end footer -->


</div>
<!-- end wrapper -->



<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-9308763-1");
pageTracker._trackPageview();
} catch(err) {}</script>
</body>
</html>
