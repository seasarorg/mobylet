<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>mobylet（モビレット） | 機能リファレンス | 携帯Webアプリケーションを開発するためのJavaオープンソースフレームワーク</title>
<meta http-equiv="Content-Language" content="ja" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta name="description" content="「mobylet」はJavaで作られたオープンソースのモバイルWebアプリケーションフレームワークで、様々なWebフレームワークと共に利用することが可能です。" />
<meta name="keywords" content="携帯,モバイル,Web,Java,OSS,絵文字,mobylet" />
<link rel="shortcut icon" type="image/x-icon" href="../img/favicon.ico" />
<script src="../js/rollover.js" type="text/javascript"></script>
<link href="../css/mobylet.css" rel="stylesheet" type="text/css" />
<link href="../css/colorFT.css" rel="stylesheet" type="text/css" />
</head>
<body id="pageTop">
<div id="wrapper">
	<!-- start header -->
	<div id="header" class="cFix">
		<h1 id="logo" class="fl"><a href="../index.html" title="mobylet"><img src="../img/logo.gif" alt="mobylet" title="mobylet" /></a></h1>
		<ul id="gNav" class="fr cFix">
			<li><a href="../index.html"><img src="../img/globalnavi/tp.gif" alt="TOP" title="TOP" class="imgover" /></a></li>
			<li><a href="../guides/"><img src="../img/globalnavi/bg.gif" alt="初めての方へ" title="初めての方へ" class="imgover" /></a></li>
			<li><a href="../settings/"><img src="../img/globalnavi/st.gif" alt="mobyletの設定" title="mobyletの設定" class="imgover" /></a></li>
			<li><img src="../img/globalnavi/ft_o.gif" alt="機能リファレンス" title="機能リファレンス" /></li>
			<li><a href="../downloads/"><img src="../img/globalnavi/dl.gif" alt="ダウンロード" title="ダウンロード" class="imgover" /></a></li>
			<li><a href="../informations/"><img src="../img/globalnavi/if.gif" alt="インフォメーション" title="インフォメーション" class="imgover" /></a></li>
			<li><a href="../questions/"><img src="../img/globalnavi/qa.gif" alt="Q&amp;A" title="Q&amp;A" class="imgover" /></a></li>
		</ul>
	</div>
	<!-- end header -->


	<!-- start container -->
	<div class="container cFix">

		<!-- start mainWrap -->
		<div id="mainWrap">
			<h2>画像をリサイズする</h2>

			<!-- start main -->
			<div id="main">

				<!-- start descWrap -->
				<div id ="descWrap" class="marT20">
					<div id="descInner">
						<p class="padT10 padB20 lh18p">画像をブラウザサイズの割合によって自動でリサイズ調整する機能は、<br />
mobyletのコア機能の中でも強力なツールの一つです。<br />
元画像へのアクセス方法は、ローカルパスを使ったアクセスと、HTTP経由でのアクセスの両方が利用できます。<br />
また、一度リサイズした画像をキャッシュする機能も標準で搭載しています。<br />
</p>
					</div>
				</div>
				<!-- end descWrap -->

				<!-- start cstWrap -->
				<div class="cstWrap marT22">
					<h3 id="fitwidth">横幅割合指定</h3>
					<div class="cstInner">
						<h4>横幅割合を指定して、縦横比を保ちリサイズする</h4>

						<p class="marT20 lh18p">
						携帯ブラウザは端末毎にブラウザサイズが異なるため、<br />
						画像を指定個数横に並べる場合などに、綺麗に表示することは困難とされています。<br />
						しかしMobyletでは、アクセス端末のブラウザサイズを取得し、<br />
						ブラウザサイズとの比率により画像をリサイズすることで、この問題を解決しています。<br />
						<br />
						まず、画像リサイズ機能を使用するために、<a href="../settings/resize.html">画像リサイズ設定</a>を参照して設定を行なってください。<br />
						次に、カスタムタグを使用するために、<a href="../settings/index.html#taglib">taglibの利用設定</a>を参照して、JSPにpageディレクティブを記述してください。<br />
						<br />
						横幅割合を指定する場合、カスタムタグを使用して以下のように記述します。<br />
						元画像を、端末のブラウザサイズの20%にリサイズして画面に表示します。
						</p>
						<!-- start codeWrap -->
						<div class="codeWrap marT20">
							<div class="codeInner">
								<pre class="code">&lt;m:img src="./images/resize.jpg" magniWidth="0.2"&gt;</pre>
							</div>
						</div>
						<!-- end codeWrap -->
						<p class="marT20 lh18p">
						リサイズ方式は<br />
						「FITWIDTH」<br />
						「INSQUARE」<br />
						「CLIPSQUARE」<br />
						の3つが用意されており、リサイズ方式を指定しない場合のデフォルトは「FITWIDTH」になります。<br />
						「INSQUARE」「CLIPSQUARE」についての詳細は<a href="#other">その他のリサイズ方式</a>をご覧ください。<br />
						<br />
						それぞれのリサイズ形式で横長の画像をリサイズした場合、以下のように表示されます。
						</p>
						<!-- start codeWrap -->
						<div class="codeWrap marT20">
							<div class="codeInner">
								<pre class="code">
&lt;m:img src="./images/resize.jpg" magniWidth="0.2"&gt;
&lt;m:img src="./images/resize.jpg" magniWidth="0.2" scaleType="INSQUARE"&gt;
&lt;m:img src="./images/resize.jpg" magniWidth="0.2" scaleType="CLIPSQUARE"&gt;</pre>
							</div>
						</div>
						<!-- end codeWrap -->
						<div class="marT10 cFix">
							<div class="fl pad5 tCenter">
								<img alt="リサイズ横 FITWIDTH" src="../img/contents/references/resize_w_f.gif"/>
								<p class="fs10p">FITWIDTH</p>
							</div>
							<div class="fl pad5 tCenter">
								<img alt="リサイズ横 INSQUARE" src="../img/contents/references/resize_w_i.gif"/>
								<p class="fs10p">INSQUARE</p>
							</div>
							<div class="fl pad5 tCenter">
								<img alt="リサイズ横 CLIPSQUARE" src="../img/contents/references/resize_w_c.gif"/>
								<p class="fs10p">CLIPSQUARE</p>
							</div>
						</div>
						<p class="marT20 lh18p">縦長の画像をリサイズした場合、以下のように表示されます。</p>
						<!-- start codeWrap -->
						<div class="codeWrap marT20">
							<div class="codeInner">
								<pre class="code">
&lt;m:img src="./images/resizeV.jpg" magniWidth="0.2"&gt;
&lt;m:img src="./images/resizeV.jpg" magniWidth="0.2" scaleType="INSQUARE"&gt;
&lt;m:img src="./images/resizeV.jpg" magniWidth="0.2" scaleType="CLIPSQUARE"&gt;</pre>
							</div>
						</div>
						<!-- end codeWrap -->
						<div class="marT10 cFix">
							<div class="fl pad5 tCenter">
								<img alt="リサイズ縦 FITWIDTH" src="../img/contents/references/resize_h_f.gif"/>
								<p class="fs10p">FITWIDTH</p>
							</div>
							<div class="fl pad5 tCenter">
								<img alt="リサイズ縦 INSQUARE" src="../img/contents/references/resize_h_i.gif"/>
								<p class="fs10p">INSQUARE</p>
							</div>
							<div class="fl pad5 tCenter">
								<img alt="リサイズ縦 CLIPSQUARE" src="../img/contents/references/resize_h_c.gif"/>
								<p class="fs10p">CLIPSQUARE</p>
							</div>
						</div>
						<p class="marT20 lh18p">
						※端末のブラウザサイズが取得できない場合には、元画像がそのまま表示されます。<br />
						　その場合は、<a href="../settings/index.html#valueengine">最新の端末情報を取得する</a>を参照して、最新の端末情報を取得しているかを確認してください。
						</p>
						<p class="marT20 lh18p fgRed">
						&lt;制限事項&gt;<br />
						Seasar2連携時、HotDeploy環境下ではHotdeployFilter内でデッドロックが発生するため、<br />
						同ホスト同アプリケーションへの画像パスを「http:」から始まる絶対パスでの指定はできません。<br/>
						HotDeploy環境下での同ホスト同アプリケーション内への画像のパスは、<br />
						mobylet.image.propertiesでimage.local.base.dirに設定したディレクトリ以降の相対パスを記述してください。
						</p>
						<div class="goTop tRight marT30"><a href="#pageTop">ページのTOPへ戻る</a></div>
					</div>
					<!-- end cstInner -->
				</div>
				<!-- end cstWrap -->

				<!-- start cstWrap -->
				<div class="cstWrap marT22">
					<h3 id="imagemagick">画像処理エンジンを変える</h3>
					<!-- start cstInner -->
					<div class="cstInner">
						<h4>画像処理エンジンにImageMagickを利用する</h4>
						<p class="marT20 lh18p">
						mobyletはデフォルトでAWTを利用して画像変換処理を行っていますが、<br />
						画質は必ずしも良いとは言えません。<br />
						より良い画質を求める場合は、画像処理エンジンをImageMagick等に変更することをオススメします。<br />
						<br />
						<a href="../settings/resize.html#imagemagick">画像処理エンジンをImageMagickに変更する方法はこちら</a>
						</p>
						<div class="goTop tRight marT30"><a href="#pageTop">ページのTOPへ戻る</a></div>
					</div>
					<!-- end cstInner -->
				</div>
				<!-- end cstWrap -->

				<!-- start cstWrap -->
				<div class="cstWrap marT22">
					<h3 id="other">その他のリサイズ方式 </h3>
					<!-- start cstInner -->
					<div class="cstInner">
						<h4>領域を指定してリサイズする</h4>
						<p class="marT20 lh18p">
						領域を指定して画像をリサイズする場合は、以下のように記述します。<br />
						「INSQUARE」を指定すると、横幅を基準とした正方形に収まるサイズに画像全体を縮小します。<br />
						<br />
						このリサイズ方式は、縦長の画像と横長の画像が混在するケースで、<br />
						画像全体を綺麗に並べて表示したい場合などに有効です。
						</p>
						<div class="codeWrap marT20">
							<div class="codeInner">
								<pre class="code">&lt;m:img src="./images/resize.jpg" magniWidth="0.2" scaleType="INSQUARE"&gt;</pre>
							</div>
						</div>

						<h4>クリッピングしてリサイズする</h4>
						<p class="marT20 lh18p">
						画像をクリッピングして中抜き画像を表示する場合は、以下のように記述します。<br />
						「CLIPSQUARE」を指定すると、横幅を基準とした正方形に縮小し、はみ出る部分をくり抜いた画像に変換します。<br />
						<br />
						このリサイズ方式は、縦長の画像と横長の画像が混在するケースで、<br />
						全ての画像を同じサイズで並べて表示したい場合などに有効です。
						</p>
						<div class="codeWrap marT20">
							<div class="codeInner">
								<pre class="code">&lt;m:img src="./images/resize.jpg" magniWidth="0.2" scaleType="CLIPSQUARE"&gt;</pre>
							</div>
						</div>
						<div class="goTop tRight marT30"><a href="#pageTop">ページのTOPへ戻る</a></div>
					</div>
					<!-- end cstInner -->
				</div>
				<!-- end cstWrap -->

				<!-- start cstWrap -->
				<div class="cstWrap marT22">
					<h3 id="cache">キャッシュ機能</h3>
					<!-- start cstInner -->
					<div class="cstInner">
						<h4>リサイズした画像をキャッシュして利用する</h4>
						<p class="marT20 lh18p">
						画像のリサイズ処理をリクエスト毎に行う場合、特に画像が多いページでは<br />
						毎回画面の表示時間に時間がかかり、サーバーの負荷も高くなります。<br />
						<br />
						一度リサイズした画像をキャッシュしておくことで、上述の問題を回避することが可能です。<br />
						キャッシュ機能を有効にするには、クラスパス配下の「mobylet.image.properties」に以下を記述します。<br />
						キャッシュファイルはファイル名、ファイル更新日時、横幅割合、端末のブラウザの横幅、リサイズ方法により一意になります。
						</p>
						<!-- start codeWrap -->
						<div class="codeWrap marT20">
							<div class="codeInner">
								<pre class="code">image.cache.base.dir=キャッシュファイルを保存するディレクトリ</pre>
							</div>
						</div>
						<!-- end codeWrap -->
						<p class="marT20 lh18p">
						※GAEを使用する場合は、上記の設定を行なわなくても、デフォルトでmemcachedを使用したキャッシュが有効になります。
						</p>
						<div class="goTop tRight marT30"><a href="#pageTop">ページのTOPへ戻る</a></div>
					</div>
					<!-- end cstInner -->
				</div>
				<!-- end cstWrap -->
			</div>
			<!-- end main -->
		</div>
		<!-- end mainWrap -->


		<!-- start sideArea -->
		<div id="sideArea">
			<dl class="sideCst">
				<dt><span class="fs12p">機能リファレンス</span></dt>
				<dd>
					<ul>
					<li><a href="./">機能リファレンストップ</a></li>
					<li><a href="./carrier.html">キャリアを判定する</a></li>
					<li><a href="./mobylet.html">端末の情報を取得する</a></li>
					<li><a href="./gps.html">GPSと地図を利用する</a></li>
					<li><a href="./emoji.html">絵文字を扱う</a></li>
					<li><a href="./image.html">画像をリサイズする</a></li>
					<li><a href="./hankaku.html">半角に変換する</a></li>
					<li><a href="./mail.html">メールを送る</a></li>
					<li><a href="./xhtml.html">XHTMLのビューを利用する</a></li>
					<li><a href="./taglibs.html">便利なタグライブラリを利用する</a></li>
					<li><a href="./analytics.html">Google Analyticsを利用する</a></li>
					<li class="last"><a href="./mania.html">マニアックに利用する</a></li>
					</ul>
				</dd>
			</dl>
			<ul class="banner cFix marT20">
						<li><a href="http://d.hatena.ne.jp/mobylet/" target="_blank"><img src="../img/bnr_blog.gif" alt="ブログ" title="ブログ" class="imgover" /></a></li>
						<li><a href="https://www.seasar.org/issues/browse/MOBYLET" target="_blank"><img src="../img/bnr_jira.gif" alt="JIRA" title="JIRA" class="imgover" /></a></li>
			</ul>
		</div>
		<!-- end sideArea -->


	</div>
	<!-- end container -->


	<!-- start footer -->
	<div class="container marT30">
		<div class="tRight"><a href="#pageTop"><img src="../img/bg_gotop_foot.gif" alt="ページのTOPへ戻る" title="ページのTOPへ戻る" class="imgover" /></a></div>
	</div>
	<div id="footer">
		<div class="container">
			<ul class="footLink cFix">
				<li><a href="../index.html">TOP</a></li>
				<li><a href="../guides/">初めての方へ</a></li>
				<li><a href="../settings/">mobyletの設定</a></li>
				<li><a href="../references/">リファレンス</a></li>
				<li><a href="../downloads/">ダウンロード</a></li>
				<li><a href="../informations/">インフォメーション</a></li>
				<li class="last"><a href="../questions/">Q&amp;A</a></li>
			</ul>
			<div class="marT40">
				constructed by <a href="http://www.leihauoli.com/" target="_blank" title="株式会社レイハウオリ">株式会社Lei Hau'oli</a><br/>
				supported by <a href="http://valueengine.jp/" target="_blank" title="株式会社バリューエンジン">株式会社バリューエンジン</a><br/>
				&copy; Copyright Lei Hau'oli Co.,Ltd. and <a href="http://www.seasar.org/" target="_blank" title="The Seasar Project">The Seasar Foundation</a> and the others 2006, all rights reserved.
			</div>
		</div>
		<!-- end container -->
	</div>
	<!-- end footer -->


</div>
<!-- end wrapper -->



<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-9308763-2");
pageTracker._trackPageview();
} catch(err) {}</script>
</body>
</html>
